LUCAS HIDEKI DOKKO 734057




CREATE DATABASE CLINICAMEDICA;

CREATE TABLE MEDICO (
IDCRM NUMERIC(7)  NOT NULL PRIMARY KEY,
NOME CHAR NOT NULL,
TELEFONE VARCHAR (12) NOT NULL,
ID_ESPECIALIDADE INT,

FOREIGN KEY (ID_ESPECIALIDADE)
REFERENCES ESPECIALIDADE(IDESPECIALIDADE)

);





CREATE TABLE ESPECIALIDADE (
IDESPECIALIDADE INT PRIMARY KEY AUTO_INCREMENT,
NOME CHAR 

);



CREATE TABLE PACIENTES(
IDCPF VARCHAR (12) PRIMARY KEY NOT NULL,
NOME CHAR (30) NOT NULL,
DD VARCHAR (2) NOT NULL,
TELEFONE VARCHAR (9) NOT NULL,
POSSUIPLANO VARCHAR (1) NOT NULL

);



CREATE TABLE PLANO(
IDPLANO INT PRIMARY KEY AUTO_INCREMENT,
NOME CHAR (30),
CONTRATO INT (8) NOT NULL,
TITULAR VARCHAR(1) NOT NULL,
ID_CPF VARCHAR (12),
FOREIGN KEY (ID_CPF)
REFERENCES PACIENTES(IDCPF)

);


CREATE TABLE ENDERECO (
IDENDERECO INT PRIMARY KEY AUTO_INCREMENT,
RUA CHAR (30) NOT NULL,
NUMERO CHAR(30) NOT NULL,
CIDADE CHAR(30) NOT NULL,
ESTADO CHAR(30) NOT NULL,
ID_CRM NUMERIC(7),
ID_CPF VARCHAR (12),

FOREIGN KEY (ID_CRM) 
REFERENCES MEDICO(IDCRM),

FOREIGN KEY (ID_CPF)
REFERENCES PACIENTES(IDCPF)

);



CREATE TABLE CONSULTA (
ID_CRM NUMERIC (7),
ID_CPF VARCHAR (12),
DATACONSULTA TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
VALOR NUMERIC (7,2),
DIAGNOSTICO CHAR(255),
PEDIDOEXAME VARCHAR(1)

);



/* CODIGOS PARA CORREÇÃO DAS TABELAS USADOS PARA CORRIGIR NO PROGRAMA DE TESTE*/

DELETE FROM ESPECIALIDADE
WHERE NOME='C' AND IDESPECIALIDADE='1';

ALTER TABLE ENDERECO 
MODIFY COLUMN 


ALTER TABLE ENDERECO
DROP CONSTRAINT (ID_CRM);

UPDATE ESPECIALIDADE 
SET IDESPECIALIDADE = 5
WHERE NOME = 'OFTALMOLOGISTA';

SELECT * FROM MEDICO;

SHOW CREATE TABLE ENDERECO;


ALTER TABLE PLANO
MODIFY COLUMN NOME CHAR(30);




/*INSERINDO DADOS NA ESPECIALIDADE*/

INSERT INTO ESPECIALIDADE VALUES(NULL,'CLINICA GERAL');
INSERT INTO ESPECIALIDADE VALUES(NULL,'PEDIATRIA');
INSERT INTO ESPECIALIDADE VALUES(NULL,'ORTOPEDIA');
INSERT INTO ESPECIALIDADE VALUES(NULL,'GINECOLOGISTA');
INSERT INTO ESPECIALIDADE VALUES(NULL,'OFTALMOLOGISTA');




/*INSERINDO OS DADOS DO MEDICO*/

INSERT INTO MEDICO VALUES ('0734057','LUCAS HIDEKI DOKKO','985558520',1);
INSERT INTO MEDICO VALUES ('0736258','BRUNO CALANDRIA','985454899',2);
INSERT INTO MEDICO VALUES ('0582354','ANDRE RIBEIRO','925485508',3);
INSERT INTO MEDICO VALUES ('0854525','PEDRO ARNOLD','955858521',4);
INSERT INTO MEDICO VALUES ('0736278','LUIZ FERNANDO SOSNOSKI','935958510',5);


/* INSERINDO OS DADOS ENDERECO MEDICO*/

INSERT INTO ENDERECO VALUES (NULL,'RUA JAPAO','255','SANTO ANDRE','SP','0734057',NULL);
INSERT INTO ENDERECO VALUES (NULL,'RUA ARGENTINA','1009','SANTO ANDRE','SP','0736258',NULL);
INSERT INTO ENDERECO VALUES (NULL,'RUA COLUMBIA','500','SANTO ANDRE','SP','00582354',NULL);
INSERT INTO ENDERECO VALUES (NULL,'RUA LUXEMBURGO','362','SANTO ANDRE','SP','0854525',NULL);
INSERT INTO ENDERECO VALUES (NULL,'RUA LINDOIA','652','SANTO ANDRE','SP','0736278',NULL);

/*INSERINDO DADOS DO PACIENTE*/

INSERT INTO PACIENTES VALUES('45245878595','MARCELA SOUZA','11','952354849','N');
INSERT INTO PACIENTES VALUES('45236548512','SANDRA SOUZA','11','953548525','S');
INSERT INTO PACIENTES VALUES('23585496587','MATHEUS SANTOS','11','923658489','S');
INSERT INTO PACIENTES VALUES('65215232512','RENATO OLIVEIRA','11','985687822','N');

/* INSERINDO OS DADOS ENDERECO PACIENTE*/

INSERT INTO ENDERECO VALUES(NULL,'RUA ORATORIO','1665','SANTO ANDRE','SP',NULL,'45245878595');
INSERT INTO ENDERECO VALUES(NULL,'RUA JUVENTUS','258','SANTO ANDRE','SP',NULL,'45236548512');
INSERT INTO ENDERECO VALUES(NULL,'RUA VILNA','254','SANTO ANDRE','SP',NULL,'23585496587');
INSERT INTO ENDERECO VALUES(NULL,'RUA MAGNUS','1258','SANTO ANDRE','SP',NULL,'65215232512');


/*INSERINDO DADOS TABELA CONSULTA */

INSERT INTO CONSULTA VALUES ('0734057','45245878595',NULL,'250.1', 'FOI DIAGNOSTICADO COM COVID','S');
INSERT INTO CONSULTA VALUES ('0736258','23585496587',NULL,'190', 'DOR DE BARRIGA E FEBRE','N');
INSERT INTO CONSULTA VALUES ('0854525','45236548512',NULL,'52', 'FUNGOS NA REGIÃO DA VIRILHA','N');
INSERT INTO CONSULTA VALUES ('0734057','65215232512',NULL,'120', 'FOI DIAGNOSTICADO COM COVID','S');

/* PLANO */

INSERT INTO PLANO VALUES (NULL,'SULAMERICA','10254848','S','45245878595');
INSERT INTO PLANO VALUES (NULL,'AMIL','20548515','S','23585496587');
INSERT INTO PLANO VALUES (NULL,'SANTA HELENA','23658548','N','45236548512');
INSERT INTO PLANO VALUES (NULL,'SULAMERICA','25487589','S','65215232512');

/* USANDO O JOIN */

/*CONSULTANDO ESPECIALIDADE DO MEDICO*/

SELECT MEDICO.NOME,MEDICO.IDCRM,MEDICO.ID_ESPECIALIDADE,ESPECIALIDADE.NOME AS NESPECIALIDADE
FROM MEDICO
LEFT JOIN ESPECIALIDADE ON IDESPECIALIDADE = ID_ESPECIALIDADE
GROUP BY NOME;

/*CONSULTANDO PACIENTE*/

SELECT PACIENTES.NOME,PACIENTES.IDCPF,PACIENTES.TELEFONE,
CONSULTA.DATACONSULTA,CONSULTA.VALOR,CONSULTA.DIAGNOSTICO,CONSULTA.PEDIDOEXAME
FROM CONSULTA
LEFT JOIN PACIENTES ON IDCPF = ID_CPF;

/*CONSULTANDO PLANO DO PACIENTE*/
SELECT PACIENTES.NOME,PLANO.NOME AS NPLANO,PLANO.TITULAR,PLANO.CONTRATO
FROM PLANO
LEFT JOIN PACIENTES ON IDCPF = ID_CPF
GROUP BY NOME;
























